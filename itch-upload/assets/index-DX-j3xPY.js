import{h as O}from"./kaplay-CpR_OpMc.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function p(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=p(s);fetch(s.href,r)}})();function x(){loadSprite("sheep",["./sprites/sheep1.png","./sprites/sheep2.png"],{anims:{idle:{from:0,to:0},walk:{from:0,to:1,loop:!0,speed:8}}}),loadSprite("hill1","./sprites/hills.png"),loadSprite("sky1","./sprites/sky.png"),loadSprite("jet","./sprites/jet.png"),loadSprite("boss",["./sprites/custerboss/1.png","./sprites/custerboss/2.png","./sprites/custerboss/3.png","./sprites/custerboss/4.png"],{anims:{idle:{from:0,to:2,loop:!0,speed:6},shoot:{from:3,to:3,loop:!1}}}),loadSprite("bean","./sprites/bean.png").then(n=>{getSprite("bean").data,add([sprite("hill1"),pos(0,height()),anchor("botleft"),scale(1),z(-1)]),add([sprite("sky1"),pos(0,0),anchor("topleft"),scale(1),z(-2)]),loadShader("invert",null,`
        uniform float u_time;
        
        vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
            vec4 c = def_frag();
            float t = (sin(u_time * 4.0) + 1.0) / 2.0;
            return mix(c, vec4(1.0 - c.r, 1.0 - c.g, 1.0 - c.b, c.a), t);
        }
    `),loadShader("redGlow",null,`
        uniform float u_time;
        
        vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
            vec4 c = def_frag();
            float pulse = (sin(u_time * 12.0) + 1.0) / 2.0; 
            vec3 redColor = vec3(1.0, 0.0, 0.0);   
            vec3 whiteColor = vec3(1.2, 1.2, 1.2); 
            vec3 flashColor = mix(redColor, whiteColor, pulse); 
            vec3 tinted = c.rgb * flashColor; 
            return vec4(tinted, c.a);
        }
    `)})}O({background:[0,0,0],width:1280,height:720,stretch:!0,letterbox:!1});const c=48,v=800,b=1200,f=480;let a=0,l=0,S=["scream1","scream2"];onUpdate(()=>{});scene("game",()=>{setGravity(1600);let n=!1,d=null,p=0;loadRoot("./"),loadSound("destroy","/sounds/destroy.wav"),loadSound("bang","/sounds/gun.wav"),loadSound("mee","/sounds/mee.wav"),loadMusic("themesong","/music/game.mp3"),loadMusic("boss1","/music/bossfight.mp3"),loadMusic("scream1","/sounds/scream1.wav"),loadMusic("scream2","/sounds/scream2.wav"),x(),wait(.1,()=>{d=play("themesong",{volume:.2,loop:!0}),setData("gameMusic",d)}),add([rect(200,20),pos(width()/2-100,20),color(100,100,100),fixed(),z(100)]);const o=add([rect(200,20),pos(width()/2-100,20),color(0,200,0),fixed(),z(101)]),s=add([text("100/100",{size:16}),pos(width()/2-90,22),color(255,255,255),outline(3,rgb(0,0,0)),fixed(),z(102)]),r=add([text("COMBO: 0",{size:24}),pos(width()/2,60),anchor("center"),fixed(),z(100),color(255,255,0),outline(4,rgb(0,0,0))]);add([text(`Revenge of the SHIBA
By Birkir Reyniss`,{size:18,align:"left"}),pos(20,20),color(255,215,0),outline(3,rgb(0,0,0)),fixed(),z(100)]);const t=add([text("JETS LEFT: 20",{size:20}),pos(width()-20,20),anchor("topright"),color(255,100,100),outline(3,rgb(0,0,0)),fixed(),z(100)]);add([rect(40,150),pos(width()-60,height()-c-150),color(150,75,0),area(),body({isStatic:!0}),"gate"]),add([text("LOCKED",{size:16}),pos(width()-80,height()-c-180),color(255,0,0),fixed(),z(100)]),add([pos(0,height()-c),rect(width(),c),opacity(0),area(),body({isStatic:!0}),"floor"]);const e=add([sprite("sheep"),pos(400,-600),area(),body(),health(100)]),h=add([rect(700,220),pos(width()/2,height()/2),anchor("center"),color(0,0,0),opacity(.8),outline(4,rgb(255,215,0)),fixed(),z(199)]),u=add([text(`Get a 3 hit kill combo
or defeat 20 US AIRFORCE Jets total!

Remember to use your DOUBLE JUMP! SUper-jump on top of them!!!!`,{size:32,align:"center"}),pos(width()/2,height()/2),anchor("center"),color(255,255,255),outline(4,rgb(0,0,0)),fixed(),z(200),opacity(1)]);wait(4,()=>{tween(u.opacity,0,1,i=>u.opacity=i,easings.easeOutQuad),tween(h.opacity,0,1,i=>h.opacity=i,easings.easeOutQuad),wait(1,()=>{destroy(u),destroy(h)})});function w(){const i=add([sprite("jet"),pos(width()+50,rand(150,520)),area(),move(LEFT,rand(150,600)),offscreen({destroy:!0}),"enemy","jet",shader("invert",()=>({u_time:time()}))]);i.onUpdate(()=>{if(rand(0,1)<.6){const g=i.pos.x+i.width,y=i.pos.y+20,m=add([rect(rand(4,8),rand(4,8)),pos(g,y),color(rand(150,255),rand(100,150),rand(0,50)),opacity(rand(.7,1)),lifespan(rand(.3,.6)),move(RIGHT,rand(50,100)),scale(1),z(i.z-1)]);m.onUpdate(()=>{m.opacity-=dt()*2,m.scaleTo(m.scale.x-dt()*1.5)})}})}loop(1.5,()=>{w()}),e.onCollide("jet",i=>{const g=e.pos.y+e.height,y=i.pos.y;e.vel.y>0&&g<=y+30?(destroy(i),play("destroy"),shake(8),addKaboom(i.pos),l++,p++,r.text=`COMBO: ${l}`,t.text=`JETS LEFT: ${20-p}`,(l>=3||p>=20)&&!n&&(n=!0,shake(20),wait(1,()=>{d&&(d.paused=!0),go("boss")})),e.jump(400)):(e.hurt(25),o.width=e.hp()/100*200,s.text=`${e.hp()}/100`,shake(12),play("mee"),e.pos.x-=50,destroy(i),l=0,r.text=`COMBO: ${l}`,e.hp()<=0&&go("gameover"))}),e.onGround(()=>{a=0,l=0,r.text=`COMBO: ${l}`}),onKeyDown("right",()=>{e.move(f,0)}),onKeyPress("right",()=>{e.play("walk")}),onKeyRelease("right",()=>{e.play("idle")}),onKeyDown("left",()=>{e.move(-f,0)}),onKeyPress("left",()=>{e.play("walk")}),onKeyRelease("left",()=>{e.play("idle")}),onKeyPress("up",()=>{(e.isFalling()||e.isGrounded())&&a!==10&&(a++,e.jump(v)),a===2&&(e.jump(b),addKaboom(e.pos),a=10),a===10&&e.isGrounded()&&(a=0,l=0,r.text=`COMBO: ${l}`,e.jump(0))}),onKeyDown("down",()=>{e.move(f,200)})});scene("boss",()=>{setGravity(1600),x();const n=play("boss1",{volume:.2,loop:!0});add([rect(400,30),pos(width()/2-200,20),color(100,100,100),fixed(),z(100)]);const d=add([rect(400,30),pos(width()/2-200,20),color(200,0,0),fixed(),z(101)]),p=add([text("BOSS: 300/300",{size:20}),pos(width()/2,36),anchor("center"),color(255,255,255),outline(3,rgb(0,0,0)),fixed(),z(102)]);add([pos(0,height()-c),rect(width(),c),opacity(0),area(),body({isStatic:!0}),"floor"]);const o=add([sprite("sheep"),pos(200,height()-c-100),area(),body(),health(100),"player"]);add([rect(200,20),pos(20,20),color(100,100,100),fixed(),z(100)]);const s=add([rect(200,20),pos(20,20),color(0,200,0),fixed(),z(101)]),r=add([text("100/100",{size:16}),pos(30,22),color(255,255,255),outline(3,rgb(0,0,0)),fixed(),z(102)]),t=add([sprite("boss"),pos(width()-200,height()-c-150),area(),health(300),"boss",{shootTimer:0,moveTimer:0,moveDirection:-1}]);t.play("idle"),t.onUpdate(()=>{t.moveTimer+=dt(),t.moveTimer>2&&(t.moveTimer=0,t.moveDirection*=-1),t.move(0,t.moveDirection*100),t.shootTimer+=dt(),t.shootTimer>1.5&&(t.shootTimer=0,t.play("shoot"),play("bang"),add([rect(20,8),pos(t.pos.x-40,t.pos.y+t.height/2),area(),move(LEFT,400),color(255,255,0),offscreen({destroy:!0}),"bullet"]),wait(.2,()=>{t.exists()&&t.play("idle")}))}),o.onCollide("boss",e=>{const h=o.pos.y+o.height,u=e.pos.y;o.vel.y>0&&h<=u+50&&(e.hurt(50),d.width=e.hp()/300*400,p.text=`BOSS: ${e.hp()}/300`,shake(15),e.use(shader("redGlow",()=>({u_time:time()}))),play(choose(S)),wait(2,()=>{e.exists()&&e.unuse("shader")}),addKaboom(e.pos),o.jump(600),tween(o.pos.x,o.pos.x-500,.2,i=>o.pos.x=i,easings.easeOutQuad),e.hp()<=0&&(destroy(e),wait(1,()=>{n.paused=!0,go("win",2)})))}),o.onCollide("bullet",e=>{destroy(e),o.hurt(20),s.width=o.hp()/100*200,r.text=`${o.hp()}/100`,shake(10),o.hp()<=0&&(n.paused=!0,go("gameover"))}),o.onGround(()=>{a=0}),onKeyDown("right",()=>{o.move(f,0)}),onKeyPress("right",()=>{o.play("walk")}),onKeyRelease("right",()=>{o.play("idle")}),onKeyDown("left",()=>{o.move(-f,0)}),onKeyPress("left",()=>{o.play("walk")}),onKeyRelease("left",()=>{o.play("idle")}),onKeyPress("up",()=>{(o.isFalling()||o.isGrounded())&&a!==10&&(a++,o.jump(v)),a===2&&(o.jump(b),addKaboom(o.pos),a=10),a===10&&o.isGrounded()&&(a=0,o.jump(0))})});scene("win",n=>{add([text(`LEVEL ${n-1} COMPLETE!`,{size:48}),pos(width()/2,height()/2-50),anchor("center"),color(255,215,0)]),add([text("Press SPACE for next level",{size:24}),pos(width()/2,height()/2+50),anchor("center")]),onKeyPress("space",()=>{go("game")})});scene("gameover",()=>{add([text("GAME OVER",{size:64}),pos(width()/2,height()/2-80),anchor("center"),color(255,0,0)]),add([text("Press SPACE to restart",{size:24}),pos(width()/2,height()/2+40),anchor("center")]),onKeyPress("space",()=>{go("game")})});go("game");
